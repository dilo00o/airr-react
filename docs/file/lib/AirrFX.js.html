<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">lib/AirrFX.js | airr-react</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Reusable React components for building Single Page Apps."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="airr-react"><meta property="twitter:description" content="Reusable React components for building Single Page Apps."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/rafal-r/airr-react"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/AirrMayer.js~AirrMayer.html">AirrMayer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/AirrScene.js~AirrScene.html">AirrScene</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/AirrSceneWrapper.js~AirrSceneWrapper.html">AirrSceneWrapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/AirrSidepanel.js~AirrSidepanel.html">AirrSidepanel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/AirrView.js~AirrView.html">AirrView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/lib/AirrViewWrapper.js~AirrViewWrapper.html">AirrViewWrapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AirrFX">AirrFX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Helpers">Helpers</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-isMobileDevice">isMobileDevice</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-supportPassive">supportPassive</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">lib/AirrFX.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * Animation utiliy class. Performs css based transition animations
 */
export default function AirrFX() {}

/**
 * Animate passed HTML element with power of css transitions
 * 
 * @param {HTMLElement} element
 * @param {object} startProps css properties that will be set prior the animation
 * @param {array} transitionProps array of css transition definitions, e.g. [&apos;opacity 700ms ease-in&apos;, &apos;transform .4s ease-out&apos;]. Compatibility props like `-webkit-transform` are not needed as they will be added automatically
 * @param {object} endProps target css properties values that animation will go to
 * @param {function} preAnimationCallback callback to call before animation begins
 * @param {integer} endAfter time in miliseconds after which `endCallback` will be invoke
 * @param {function} endCallback function to call after endAfter time parameter is gone
 * @returns {void}
 */
AirrFX.doTransitionAnimation = function(
    element,
    startProps,
    transitionProps,
    endProps,
    preAnimationCallback,
    endAfter,
    endCallback
) {
    element.style.webkitTransition = &quot;none&quot;;
    element.style.transition = &quot;none&quot;;
    // eslint-disable-next-line
    element.offsetHeight;

    element.style.webkitBackfaceVisibility = &quot;hidden&quot;;
    element.style.backfaceVisibility = &quot;hidden&quot;;
    for (let prop in startProps) {
        if (prop === &quot;transform&quot;) {
            element.style.webkitTransform = startProps[prop];
        }
        element.style[prop] = startProps[prop];
    }
    let compatibilityString = null;
    let transitionString = transitionProps.join(&quot;,&quot;);

    if (
        transitionString.indexOf(&quot;transform&quot;) !== -1 &amp;&amp;
        transitionString.indexOf(&quot;-webkit-transform&quot;) === -1
    ) {
        compatibilityString = transitionString.replace(
            &quot;transform&quot;,
            &quot;-webkit-transform&quot;
        );
    }

    if (typeof preAnimationCallback === &quot;function&quot;) {
        preAnimationCallback();
    }

    // eslint-disable-next-line
    element.offsetHeight;

    if (compatibilityString) {
        element.style.webkitTransition = compatibilityString;
    }
    element.style.webkitTransition = transitionString;
    if (compatibilityString) {
        element.style.transition = compatibilityString;
    }
    element.style.transition = transitionString;

    // eslint-disable-next-line
    element.offsetHeight;

    for (let prop in endProps) {
        if (prop === &quot;transform&quot;) {
            element.style.webkitTransform = endProps[prop];
        }
        element.style[prop] = endProps[prop];
    }

    if (typeof endCallback === &quot;function&quot;) {
        setTimeout(function() {
            endCallback();
        }, endAfter);
    }
};

/**
 * Used by Mayers for leaving animation
 * 
 * @param {HTMLElement} dom
 * @param {int} width
 * @param {int} height
 * @param {int} t time in miliseconds
 * @param {string} headTo top,bottom,left,right
 * @param {function} callback
 * @returns {void}
 */
AirrFX.doOverlayOutAnimation = function(
    dom,
    width,
    height,
    t,
    headTo,
    callback
) {
    let startProps = { opacity: 1 };
    let endProps = { zIndex: 102, opacity: 0 };

    if ([&quot;top&quot;, &quot;bottom&quot;].indexOf(headTo) !== -1) {
        if (headTo === &quot;top&quot;) {
            endProps.webkitTransform =
                &quot;scale(0, 1) translate3d(0,-&quot; + height + &quot;px,0)&quot;;
            endProps.transform =
                &quot;scale(0, 1) translate3d(0,-&quot; + height + &quot;px,0)&quot;;
        } else {
            endProps.webkitTransform =
                &quot;scale(0, 1) translate3d(0,&quot; + height + &quot;px,0)&quot;;
            endProps.transform =
                &quot;scale(0, 1) translate3d(0,&quot; + height + &quot;px,0)&quot;;
        }
    } else {
        if (headTo === &quot;left&quot;) {
            endProps.webkitTransform =
                &quot;scale(1, 0) translate3d(-&quot; + width + &quot;px,0,0)&quot;;
            endProps.transform =
                &quot;scale(1, 0) translate3d(-&quot; + width + &quot;px,0,0)&quot;;
        } else {
            endProps.webkitTransform =
                &quot;scale(1, 0) translate3d(&quot; + width + &quot;px,0,0)&quot;;
            endProps.transform = &quot;scale(1, 0) translate3d(&quot; + width + &quot;px,0,0)&quot;;
        }
    }

    AirrFX.doTransitionAnimation(
        dom,
        startProps,
        [`opacity ${t}ms ease-out`, `transform ${t}ms ease-out`],
        endProps,
        null,
        t,
        () =&gt; {
            dom.style.cssText = &quot;&quot;;

            if (typeof callback === &quot;function&quot;) {
                callback();
            }
        }
    );
};

/**
 * Used by Mayers for entering animation
 * 
 * @param {HTMLElement} dom
 * @param {int} width
 * @param {int} height
 * @param {int} t time in miliseconds
 * @param {string} appearFrom top,bottom,left,right direction from which element will appear on the screen
 * @param {function} callback
 * @returns {void}
 */
AirrFX.doOverlayInAnimation = function(
    dom,
    width,
    height,
    t,
    appearFrom,
    callback
) {
    let startProps = { opacity: 0 };

    if ([&quot;top&quot;, &quot;bottom&quot;].indexOf(appearFrom) !== -1) {
        if (appearFrom === &quot;bottom&quot;) {
            startProps.webkitTransform =
                &quot;scale(0, 1) translate3d(0,&quot; + height + &quot;px,0)&quot;;
            startProps.transform =
                &quot;scale(0, 1) translate3d(0,&quot; + height + &quot;px,0)&quot;;
        } else {
            startProps.webkitTransform =
                &quot;scale(0, 1) translate3d(0,&quot; + -1 * height + &quot;px,0)&quot;;
            startProps.transform =
                &quot;scale(0, 1) translate3d(0,&quot; + -1 * height + &quot;px,0)&quot;;
        }
    } else {
        if (appearFrom === &quot;right&quot;) {
            startProps.webkitTransform =
                &quot;scale(1, 0) translate3d(&quot; + width + &quot;px,0,0)&quot;;
            startProps.transform =
                &quot;scale(1, 0) translate3d(&quot; + width + &quot;px,0,0)&quot;;
        } else {
            startProps.webkitTransform =
                &quot;scale(1, 0) translate3d(&quot; + -1 * width + &quot;px,0,0)&quot;;
            startProps.transform =
                &quot;scale(1, 0) translate3d(&quot; + -1 * width + &quot;px,0,0)&quot;;
        }
    }

    AirrFX.doTransitionAnimation(
        dom,
        startProps,
        [`opacity ${t}ms ease-out`, `transform ${t}ms ease-out`],
        {
            zIndex: 102,
            webkitTransform: &quot;scale(1, 1) translate3d(0,0,0)&quot;,
            transform: &quot;scale(1, 1) translate3d(0,0,0)&quot;,
            opacity: 1
        },
        null,
        t,
        () =&gt; {
            dom.style.cssText = &quot;&quot;;

            if (typeof callback === &quot;function&quot;) {
                callback();
            }
        }
    );
};

/**
 * Used for animating scroll in vertical axis
 * 
 * @param {HTMLElement} element
 * @param {int} scrollDuration time in miliseconds
 * @param {string} direction top or bottom
 * @returns {void}
 */
AirrFX.doVerticalScrollAnimation = function(
    element,
    scrollDuration,
    direction
) {
    if ([&quot;top&quot;, &quot;bottom&quot;].indexOf(direction) === -1) {
        throw new Error(&quot;Invalid direction parameter speciefied&quot;);
    }

    let scrollHeight = element.scrollHeight,
        scrollStep = Math.PI / (scrollDuration / 15),
        cosParameter = scrollHeight / 2,
        scrollCount = 0,
        scrollMargin,
        scrollEnd =
            direction === &quot;top&quot;
                ? 0
                : scrollHeight - element.parentNode.clientHeight;
    let scrollInterval = setInterval(() =&gt; {
        if (element.scrollTop !== scrollEnd) {
            scrollCount += 1;
            scrollMargin =
                cosParameter -
                cosParameter * Math.cos(scrollCount * scrollStep);

            if (direction === &quot;top&quot;) {
                element.scrollTop = element.scrollTop - scrollMargin;
            } else {
                element.scrollTop = element.scrollTop + scrollMargin;
            }
        } else {
            clearInterval(scrollInterval);
        }
    }, 15);
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
